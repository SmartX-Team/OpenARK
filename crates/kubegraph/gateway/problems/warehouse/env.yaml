---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
type: Node
metadata:
  name: warehouse-a
  namespace: default
spec:
  payload: 300
  warehouse: true
---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
type: Node
metadata:
  name: warehouse-b
  namespace: default
spec:
  payload: 0
  warehouse: true
---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
type: Constraint # FIXME: Constraint 말고 "Problem" 정의 (supply, unit_cost, capacity, ...)
metadata:
  name: optimize-warehouse
  namespace: default
spec:
  filters:
    - payload >= 100
    - payload <= 200
  where:
    - payload!
    - warehouse!
---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
type: Function
metadata:
  name: delivery
  namespace: default
spec:
  handlers:
    fake:
      filter: src.payload >= 3 && sink.payload >= 0
      script: |
        src.payload -= 3
        sink.payload += 3
