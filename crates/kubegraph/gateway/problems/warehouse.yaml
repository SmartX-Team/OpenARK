---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
kind: NetworkConnector
metadata:
  name: warehouse
  namespace: kubegraph
spec:
  metadata:
    supply: payload
  simulation:
    path: ./problems/warehouse
---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
kind: NetworkProblem
metadata:
  name: warehouse
  namespace: kubegraph
spec:
  metadata:
    supply: payload
---
apiVersion: kubegraph.ulagbulag.io/v1alpha1
kind: NetworkFunction
metadata:
  name: warehouse
  namespace: kubegraph
spec:
  dummy: {}
  filter: src.payload >= 3 && sink.payload >= 0
  script: |
    src.payload -= 3
    sink.payload += 3
