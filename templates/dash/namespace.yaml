---
apiVersion: v1
kind: Namespace
metadata:
  name: dash
  labels:
    dash.ulagbulag.io/inject-nats: "true"
    dash.ulagbulag.io/inject-otlp: "true"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nats-dash-collector
  namespace: dash
  labels:
    nats_cluster: nats
    nats_service_account: nats-dash-collector
---
apiVersion: nats.io/v1alpha2
kind: NatsServiceRole
metadata:
  name: nats-dash-collector
  namespace: dash
  labels:
    nats_cluster: nats
    nats_service_account: nats-dash-collector
spec:
  permissions:
    publish:
      - dash.collector.>
    subscribe:
      - _inbox.*
      - _INBOX.>
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nats-dash-scheduler
  namespace: dash
  labels:
    nats_cluster: nats
    nats_service_account: nats-dash-scheduler
---
apiVersion: nats.io/v1alpha2
kind: NatsServiceRole
metadata:
  name: nats-dash-scheduler
  namespace: dash
  labels:
    nats_cluster: nats
    nats_service_account: nats-dash-scheduler
spec:
  permissions:
    publish:
      - _inbox.*
      - _INBOX.>
      - dash.optimize.>
      - dash.schedule.>
    subscribe:
      - _inbox.*
      - _INBOX.>
      - dash.optimize.>
      - dash.schedule.>
      - dash.raw.>
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nats-dash-system
  namespace: dash
  labels:
    nats_cluster: nats
    nats_service_account: nats-dash-system
---
apiVersion: nats.io/v1alpha2
kind: NatsServiceRole
metadata:
  name: nats-dash-system
  namespace: dash
  labels:
    nats_cluster: nats
    nats_service_account: nats-dash-system
spec:
  permissions:
    publish:
      - _inbox.*
      - _INBOX.>
      - dash
      - dash.>
    subscribe:
      - _inbox.>
      - _INBOX.>
      - dash
      - dash.>
