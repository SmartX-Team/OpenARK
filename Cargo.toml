[workspace]
default-members = ["dash/cli"]
members = [
    # "ipwis-binding",
    "dash/actor",
    "dash/api",
    "dash/cli",
    "dash/controller",
    "dash/gateway",
    "dash/router",
    "kiss/api",
    "kiss/assets",
    "kiss/controller",
    "kiss/gateway",
    "kiss/manager",
    "kiss/monitor",
    "vine/api",
    "vine/bastion",
    "vine/controller",
    "vine/rbac",
    "vine/session",
]

[workspace.dependencies]
ipis = { git = "https://github.com/ulagbulag/ipis" }

actix-web = { version = "4.3", default-features = false, features = [
    "macros",
    "rustls",
] }
actix-web-lab = { version = "0.19" }
base64 = "0.21"
clap = { version = "4.1", features = ["env", "derive"] }
email_address = "0.2"
http-cache-reqwest = { version = "0.8", features = ["manager-cacache"] }
inflector = { package = "Inflector", version = "0.11" }
ipnet = { version = "2.7", features = ["schemars", "serde"] }
kube = { version = "0.80", default-features = false, features = [
    "client",
    "derive",
    "runtime",
    "rustls-tls",
] }
k8s-openapi = { version = "0.17", features = ["schemars", "v1_26"] }
octocrab = { git = "https://github.com/ulagbulag/octocrab", default-features = false, features = [
    "rustls-tls",
] }
regex = "1.7"
reqwest = { version = "0.11", default-features = false, features = [
    "rustls-tls",
    "stream",
] }
reqwest-middleware = "0.2"
schemars = { version = "0.8", features = ["chrono", "derive", "uuid1"] }
sea-orm = { version = "0.11", features = [
    "macros",
    "runtime-tokio-rustls",
    "sqlx-postgres",
    "with-chrono",
    "with-json",
    "with-time",
    "with-uuid",
] }
semver = "1.0"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
serde_yaml = "0.9"
sha2 = "0.10"
strum = { version = "0.24", features = ["derive"] }
tera = "1.18"
url = { version = "2.3", features = ["serde"] }

[patch.crates-io]
# Fixes a bug in building with musl binary (i.e. Alpine Linux)
# see: https://github.com/pkolaczk/fclones/issues/95#issuecomment-987375929
reflink = { git = "https://github.com/nicokoch/reflink.git", rev = "e8d93b465f5d9ad340cd052b64bbc77b8ee107e2" }
